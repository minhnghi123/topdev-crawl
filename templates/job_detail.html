<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>{{ job.title }}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/jobs_detail.css') }}">
    <style>
        .job-filter-link {
            color: #e14c2a;
            text-decoration: underline;
            cursor: pointer;
            margin-right: 2px;
        }
        .job-filter-link:hover {
            color: #c43f1d;
            text-decoration: underline;
        }
    </style>
</head>

<body>
    {% include 'components/header.html' %}
    <div class="job-detail-wrapper">
        <div class="job-detail-card">
            <div class="job-header">
                <div class="job-header-info">
                    <h1 class="job-title">{{ job.title }}</h1>
                    <div class="job-company">{{ job.company }}</div>
                    <div class="job-location" title="{{ job.full_addresses }}">
                        <i class="fa fa-map-marker"></i>
                        <span id="job-location-text">{{ job.sort_addresses }}</span>
                    </div>
                </div>
                <a href="#" class="apply-btn">Ứng tuyển ngay</a>
            </div>
            <div class="job-main-info">
                <div>
                    <strong>Cấp bậc:</strong>
                    {% if job.level %}
                        {% for level in job.level.split(',') %}
                            <a href="{{ url_for('main.jobs', level=level.strip()) }}" class="job-filter-link">{{ level.strip() }}</a>{% if not loop.last %}, {% endif %}
                        {% endfor %}
                    {% else %}
                        Không rõ
                    {% endif %}
                </div>
                <div>
                    <strong>Loại hình:</strong>
                    {% if job.job_type %}
                        {% for jt in job.job_type.split(',') %}
                            <a href="{{ url_for('main.jobs', type=jt.strip()) }}" class="job-filter-link">{{ jt.strip() }}</a>{% if not loop.last %}, {% endif %}
                        {% endfor %}
                    {% else %}
                        Không rõ
                    {% endif %}
                </div>
                <div>
                    <strong>Kỹ năng:</strong>
                    {% if job.skills %}
                        {% for skill in job.skills %}
                            <a href="{{ url_for('main.jobs', skill=skill) }}" class="job-filter-link"><span class="job-skill">{{ skill }}</span></a>
                        {% endfor %}
                    {% endif %}
                </div>
                <div><strong>Ngày đăng:</strong> {{ job.published_date or "Không rõ" }}</div>
                <div><strong>Hạn ứng tuyển:</strong> {{ job.refreshed_date_relative or "Không rõ" }}</div>
            </div>
            <div class="job-description">
                <h2>Mô tả công việc</h2>
                <div>{{ (job.content or job.html)|replace('\n', '<br>')|safe }}</div>
                {% if job.responsibilities %}
                <h2>Trách nhiệm công việc</h2>
                <div>{{ job.responsibilities|replace('\n', '<br>')|safe }}</div>
                {% endif %}
                {% if job.requirements %}
                <h2>Kỹ năng & Chuyên môn</h2>
                <div>{{ job.requirements|replace('\n', '<br>')|safe }}</div>
                {% endif %}
                {% if job.benefits_original %}
                <h2>Phúc lợi dành cho bạn</h2>
                <div>{{ job.benefits_original|replace('\n', '<br>')|safe }}</div>
                {% endif %}
                {% if job.interview %}
                <h2>Quy trình phỏng vấn</h2>
                <div>{{ job.interview|replace('\n', '<br>')|safe }}</div>
                {% endif %}
            </div>
        </div>
    </div>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        var loc = document.getElementById("job-location-text");
        var full = {{ job.full_addresses|tojson }};
        var shortAddr = "{{ job.sort_addresses }}";
        if (loc && full) {
            loc.addEventListener("mouseenter", function() {
                loc.textContent = full;
            });
            loc.addEventListener("mouseleave", function() {
                loc.textContent = shortAddr;
            });
        }
    });
    </script>
</body>

</html>