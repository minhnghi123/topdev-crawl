<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Top C√¥ng Ty</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/company.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <style>
      .load-more {
        text-align: center;
        margin: 20px 0;
      }
      .load-more a {
        background: #e74c3c;
        color: white;
        padding: 10px 20px;
        text-decoration: none;
        border-radius: 6px;
        transition: 0.3s;
      }
      .load-more a:hover {
        background: #c0392b;
      }
    </style>
  </head>
  <body>
    {% include 'components/header.html' %}
<form class="search-header" method="get" action="{{ url_for('main.company') }}">
  <input type="text" name="keyword" placeholder="Nh·∫≠p T·ª´ Kh√≥a C√¥ng Ty" value="{{ request.args.get('keyword', '') }}">
  <select name="location">
    <option value="">ƒê·ªãa ƒêi·ªÉm</option>
    <option value="H√† N·ªôi" {% if request.args.get('location') == 'H√† N·ªôi' %}selected{% endif %}>H√† N·ªôi</option>
    <option value="H·ªì Ch√≠ Minh" {% if request.args.get('location') == 'H·ªì Ch√≠ Minh' %}selected{% endif %}>H·ªì Ch√≠ Minh</option>
  </select>
  <button type="submit">T√¨m</button>
</form>


    <section class="section">
      <h2 class="section-title">T·∫•t c·∫£ c√°c c√¥ng ty</h2>
      <div class="company-grid">
        {% for company in companies %}
        <div class="company-card">
          <div
            class="company-background"
            style="background-image: url('{{ company.banner }}');"
          >
            <img
              class="company-logo"
              src="{{ company.Logo }}"
              alt="{{ company.name }}"
            />
          </div>
          <div class="company-content">
            <h3>{{ company.name }}</h3>
            <p class="slogan">{{ company.shortdescription }}</p>
            <p class="location">{{ company.short_address }}</p>
            <p class="industry">{{ company.industry }}</p>
            <div class="job-follow-row">
              <span>{{ company.followers }} üë•</span>
              {% if company.curent_job_opening != 0 %}
              <a
                class="job-link"
                href="/company/{{ company.id }}"
                target="_blank"
                >{{ company.curent_job_opening }} Job</a
              >
              {% else %}
              <a
                class="job-link"
                href="/company/{{ company.id }}"
                target="_blank"
                >Xem chi ti·∫øt</a
              >
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      {% if total_pages > 1 %}
<nav class="pagination">
  {% if page > 1 %}
    <a href="{{ url_for('main.company', page=page - 1, keyword=request.args.get('keyword', ''), location=request.args.get('location', '')) }}">‚Äπ Tr∆∞·ªõc</a>
  {% endif %}

  {% set start_page = page - 2 if page - 2 > 1 else 1 %}
  {% set end_page = page + 2 if page + 2 < total_pages else total_pages %}

  {% if start_page > 1 %}
    <a href="{{ url_for('main.company', page=1, keyword=request.args.get('keyword', ''), location=request.args.get('location', '')) }}">1</a>
    {% if start_page > 2 %}
      <span>...</span>
    {% endif %}
  {% endif %}

  {% for p in range(start_page, end_page + 1) %}
    {% if p == page %}
      <span class="current">{{ p }}</span>
    {% else %}
      <a href="{{ url_for('main.company', page=p, keyword=request.args.get('keyword', ''), location=request.args.get('location', '')) }}">{{ p }}</a>
    {% endif %}
  {% endfor %}

  {% if end_page < total_pages %}
    {% if end_page < total_pages - 1 %}
      <span>...</span>
    {% endif %}
    <a href="{{ url_for('main.company', page=total_pages, keyword=request.args.get('keyword', ''), location=request.args.get('location', '')) }}">{{ total_pages }}</a>
  {% endif %}

  {% if page < total_pages %}
    <a href="{{ url_for('main.company', page=page + 1, keyword=request.args.get('keyword', ''), location=request.args.get('location', '')) }}">Ti·∫øp ‚Ä∫</a>
  {% endif %}
</nav>

      {% endif %}
    </section>

    <script src="{{ url_for('static', filename='js/company.js') }}"></script>
    <script src="{{ url_for('static', filename='js/dropdownHeader.js') }}"></script>
  </body>
</html>
